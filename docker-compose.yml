version: "3.8"

services:
  bxb-admin:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bxb-admin
    restart: unless-stopped
    env_file:
      - .env
    environment:
      NODE_ENV: production
      PORT: 5000
      # 可选：启用 AI 合同生成接口 /api/generate-contract
      # DEEPSEEK_API_KEY: "your_key_here"
      #
      # 可选：如果你要启用 server/ 里的 Replit OIDC + DB（当前前端后台未接入）
      # DATABASE_URL: "postgres://user:pass@host:5432/db"
      # SESSION_SECRET: "change_me"
      # REPLIT_DOMAINS: "example.com"
      # REPL_ID: "repl_id"
    ports:
      - "${HOST_PORT:-5000}:5000"
    # healthcheck:
    #   test: ["CMD-SHELL", "wget -qO- http://127.0.0.1:5000/ > /dev/null || exit 1"]
    #   interval: 30s
    #   timeout: 5s
    #   retries: 5

