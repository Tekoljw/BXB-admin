[deployment]
# Replit deployment configuration - AUTOSCALE recommended for Next.js applications
deploymentTarget = "autoscale"  # Recommended: Use "autoscale" for full Next.js functionality
ignorePorts = false
publicDir = "public"  # For static files and fallback index.html
build = ["npm", "run", "build"]  # Default build command
run = ["node", "start-production.js"]  # Production server command

[deployment.autoscale]
# Autoscale deployment configuration (RECOMMENDED for Next.js apps)
# Provides server-side rendering, API routes, and full Next.js features
minReplicas = 0
maxReplicas = 10

[deployment.static]
# Static deployment configuration (ALTERNATIVE - limited functionality)
# Note: Static deployment disables API routes and server-side features
publicDir = "out"  # Output directory for static export
build = ["sh", "-c", "DEPLOYMENT_TYPE=static npm run build"]  # Static build with environment variable

[[ports]]
localPort = 5000
externalPort = 80